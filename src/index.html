<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" />
        <title>ImJSegmentation</title>
        <link rel="stylesheet" href="style.css">
    </head>

    <body>    

    	<div id="toolbar"><!-- MENU ITENS -->
    		<div class="panel border"> 
    			<div class="light padding">
		    		<ul class="horizontal">
                        <li class="dropdown">
                            <span class="button"><strong>File</strong></span>
                            <ul class="panel border vertical">
                                <li>
                                	<span class="button" onclick="" class="loadButton">
                                		<strong>Open...</strong>
                                		<input class="loadFile" id="openFile" type="file" id="files" name="files[]" multiple />
                                	</span>
                                </li>
                                <li><span class="button" onclick=""><strong>Save...</strong></span></li>
                                <li><span class="button" onclick=""><strong>Duplicate</strong></span></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <span class="button"><strong>Edit</strong></span>
                            <ul class="panel border vertical">
                                <li><span class="button" onclick=""><strong>Undo</strong></span></li>
                                <li><span class="button" onclick=""><strong>Redo</strong></span></li>
                            </ul>
                        </li>
		    			<li class="dropdown">
		    				<span class="button"><strong>Adjustaments</strong></span>
		    				<ul class="panel border vertical">
				    			<li>
				    				<span class="button" onclick="adjustaments.invert(control.getLayer().data, true);">
				    					<strong>Invert</strong>
				    				</span>
				    			</li>
                                <li>
                                    <span class="button" onclick="adjustaments.desaturate(control.getLayer().data, true);">
                                        <strong>Desaturate</strong>
                                    </span>
                                </li>
                                <li><!--adjustaments.threshold(control.getLayer().data, true);-->
                                    <span class="button" onclick="modal.open('threshold');">
                                        <strong>Threshold...</strong>
                                    </span>
                                </li>
                                <li>
                                    <span class="button" onclick="adjustaments.adaptativeThreshold(control.getLayer().data, true);">
                                        <strong>Adaptative Threshold...</strong>
                                    </span>
                                </li>
                                <li>
                                    <span class="button" onclick="adjustaments.linearPieceWise(control.getLayer().data, true, { points: [{i: 50, o: 0}, {i: 200, o: 255}] });">
                                        <strong>Linear Piecewise...</strong>
                                    </span>
                                </li>
                                <li>
                                    <span class="button" onclick="adjustaments.histogramEqualization(control.getLayer().data, true);">
                                        <strong>Histogram Equalization</strong>
                                    </span>
                                </li>
				    		</ul>
		    			</li>
		    			<li class="dropdown">
		    				<span class="button"><strong>Filters</strong></span>
		    				<ul class="panel border vertical">
                                <li><span class="divisor">Blur</span></li>
                                <li>
                                	<span class="button" onclick="filters.meanBlur(control.getLayer().data, true, {size: 3});">
                                		<strong>Mean...</strong>
                                	</span>
                                </li>
                                <li>
                                	<span class="button" onclick="filters.gaussianBlur(control.getLayer().data, true, {size: 3, sigma: 1.4});">
                                		<strong>Gaussian...</strong>
                                	</span>
                                </li>
                                <li><span class="divisor">Simplify</span></li>
                                <li>
                                	<span class="button" onclick="filters.pixelate(control.getLayer().data, true, {size: 5});">
                                		<strong>Pixelate...</strong>
                                	</span>
                                </li>
                                <li><span class="divisor">Band pass</span></li>
                                <li>
                                	<span class="button" onclick="filters.medianFilter(control.getLayer().data, true, {size: 3});">
                                		<strong>Median...</strong>
                                	</span>
                                </li>
                                <li>
                                	<span class="button" onclick="filters.lowFilter(control.getLayer().data, true, {size: 3});">
                                		<strong>Low...</strong>
                                	</span>
                                </li>
                                <li><span class="divisor">Edge</span></li>
                                <li>
                                	<span class="button" onclick="filters.LoGEdge(control.getLayer().data, true, {size: 3, sigma: 1.4});">
                                		<strong>Laplacian of Gaussian</strong>
                                	</span>
                                </li>
                                <li>
                                	<span class="button" onclick="filters.laplacianEdge(control.getLayer().data, true);">
                                		<strong>Laplacian</strong>
                                	</span>
                                </li>
                                <li>
                                	<span class="button" onclick="filters.sobelEdge(control.getLayer().data, true);">
                                		<strong>Sobel</strong>
                                	</span>
                                </li>
				    		</ul>
		    			</li>
                        <li class="dropdown">
                            <span class="button"><strong>Segmentation</strong></span>
                            <ul class="panel border vertical">
                                <li><span class="divisor">Region Grow</span></li>
                                <li>
                                	<span class="button" onclick="segmentation.regionsGrowRGB(control.getLayer().data, true, { threshold: 30, simbolicColor: false });">
                                		<strong>RGB</strong>
                                	</span>
                                </li>
                                <li>
                                	<span class="button" onclick="segmentation.regionsGrowHSV(control.getLayer().data, true, { threshold: 15, simbolicColor: false });">
                                		<strong>HSV</strong>
                                	</span>
                                </li>
                                <li>
                                	<span class="button" onclick="segmentation.regionsGrowYCC(control.getLayer().data, true, { threshold: 10, simbolicColor: true });">
                                		<strong>YCC</strong>
                                	</span>
                                </li>
                                <li><span class="divisor">Binary</span></li>
                                <li>
                                	<span class="button" onclick="segmentation.distanceTransform(control.getLayer().data, true);">
                                		<strong>Distance Transform</strong>
                                	</span>
                                </li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <span class="button"><strong>Examples</strong></span>
                            <ul class="panel border vertical">
                            </ul>
                        </li>
		    		</ul>
		    		</ul>
	    		</div>
	    		<span class="clear"></span>
    		</div>

    		<div id="tab_container" class="panel border"><!-- TAB CONTAINER -->
    		</div>
        </div>
        <div id="workspace">
            <div id="td_canvas"><!-- CANVAS -->
            	<canvas id="cnv_workspace">
            		
            	</canvas>
            	<canvas id="cnv_buffer"></canvas>
                <!--HISTOGRAMS HSV-->
            	<div id="hsv_histogram" style="position:absolute; bottom:0; display:none" class="panel border">
            		H<canvas id="cnv_histogram_h" width="360" height="100"></canvas>
            		S<canvas id="cnv_histogram_s" width="100" height="100"></canvas>
            		V<canvas id="cnv_histogram_v" width="100" height="100"></canvas>
            	</div>
            </div>
            <div id="td_panel"> 
	    		<div class="panel border"> 
	    			<div class="light padding">
	    				Layers
	    			</div>
	    		</div>
	    		<div> 
    				<ul id="list_layers" class="vertical">	
    				</ul>
	    		</div>
	    		<div class="panel border"> 
	    			<div class="light padding">
                        <span class="button"><strong>Duplicate</strong></span>
                        <span class="button"><strong>Delete</strong></span>
	    			</div>
	    		</div>
            </div>
        </div>

    	<!-- MODAL WINDOWS -->
    	<div class="bg-modal" id="modal">
        	<div class="modal panel border" id="window">
        		<h3><span id="title"></span> <a class="close_btn" onclick="modal.close();">x</a></h3>
        		<div class="content">
	        		<div class="preview">
	        			<canvas id="cnv_preview" class="border" width="300" height="300"></canvas>
	        		</div>
	        		<div>
	        			<div id="content">
		        		</div>
	        			<div class="buttons">
	                        <span class="button" onclick="modal.apply();"><strong>Ok</strong></span>
	                        <span class="button" onclick="modal.close();"><strong>Cancel</strong></span>
		    				<span class="clear"></span>
	                    </div>
	        		</div>
		    		<span class="clear"></span>
		    	</div>
        	</div>
        </div>

        <script src="attempt.js"></script>
        <!--LOAD CLASSES-->
        <script src="classes/adjustaments.js"></script>
        <script src="classes/filters.js"></script>
        <script src="classes/segmentation.js"></script>
        <script src="classes/transform.js"></script>
        
        <script src="classes/modal.js"></script>
        <script src="classes/utils.js"></script>
        <script src="classes/layer.js"></script>
        <script src="classes/archive.js"></script>
        <script src="classes/canvas.js"></script>
        <script src="classes/control.js"></script>
        <!--INITIALIZATION-->
        <script> 
        	control.init();
        	attempt();            
        </script>
    </body>
</html>
 